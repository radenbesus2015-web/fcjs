(globalThis.TURBOPACK||(globalThis.TURBOPACK=[])).push(["object"==typeof document?document.currentScript:void 0,23750,10708,e=>{"use strict";var a=e.i(843476),n=e.i(271645),t=e.i(647163);let s=n.forwardRef(({className:e,type:n,...s},l)=>(0,a.jsx)("input",{type:n,className:(0,t.cn)("flex h-10 w-full rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background file:border-0 file:bg-transparent file:text-sm file:font-medium placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50",e),ref:l,...s}));s.displayName="Input",e.s(["Input",()=>s],23750);let l=n.forwardRef(({className:e,...n},s)=>(0,a.jsx)("label",{ref:s,className:(0,t.cn)("text-sm font-medium leading-none peer-disabled:cursor-not-allowed peer-disabled:opacity-70",e),...n}));l.displayName="Label",e.s(["Label",()=>l],10708)},630374,e=>{"use strict";var a=e.i(843476),n=e.i(271645),t=e.i(326999),s=e.i(841947),s=s,l=e.i(647163);let i=t.Root;t.Trigger;let d=t.Portal;t.Close;let r=n.forwardRef(({className:e,...n},s)=>(0,a.jsx)(t.Overlay,{ref:s,className:(0,l.cn)("fixed inset-0 z-50 bg-background/80 backdrop-blur-sm data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0",e),...n}));r.displayName=t.Overlay.displayName;let o=n.forwardRef(({className:e,children:n,overlayClassName:i,hideOverlay:o,...c},m)=>(0,a.jsxs)(d,{children:[!o&&(0,a.jsx)(r,{className:i}),(0,a.jsxs)(t.Content,{ref:m,className:(0,l.cn)("fixed left-[50%] top-[50%] z-50 grid w-full max-w-lg translate-x-[-50%] translate-y-[-50%] gap-4 border bg-background p-6 shadow-lg duration-200 data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[state=closed]:slide-out-to-left-1/2 data-[state=closed]:slide-out-to-top-[48%] data-[state=open]:slide-in-from-left-1/2 data-[state=open]:slide-in-from-top-[48%] sm:rounded-lg",e),...c,children:[n,(0,a.jsxs)(t.Close,{className:"absolute right-4 top-4 rounded-sm opacity-70 ring-offset-background transition-opacity hover:opacity-100 focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:pointer-events-none data-[state=open]:bg-accent data-[state=open]:text-muted-foreground",children:[(0,a.jsx)(s.default,{className:"h-4 w-4"}),(0,a.jsx)("span",{className:"sr-only",children:"Close"})]})]})]}));o.displayName=t.Content.displayName;let c=({className:e,...n})=>(0,a.jsx)("div",{className:(0,l.cn)("flex flex-col space-y-1.5 text-center sm:text-left",e),...n});c.displayName="DialogHeader";let m=({className:e,...n})=>(0,a.jsx)("div",{className:(0,l.cn)("flex flex-col-reverse sm:flex-row sm:justify-end sm:space-x-2",e),...n});m.displayName="DialogFooter";let u=n.forwardRef(({className:e,...n},s)=>(0,a.jsx)(t.Title,{ref:s,className:(0,l.cn)("text-lg font-semibold leading-none tracking-tight",e),...n}));u.displayName=t.Title.displayName;let h=n.forwardRef(({className:e,...n},s)=>(0,a.jsx)(t.Description,{ref:s,className:(0,l.cn)("text-sm text-muted-foreground",e),...n}));h.displayName=t.Description.displayName,e.s(["Dialog",()=>i,"DialogContent",()=>o,"DialogDescription",()=>h,"DialogFooter",()=>m,"DialogHeader",()=>c,"DialogTitle",()=>u],630374)},312095,e=>{"use strict";var a=e.i(843476),n=e.i(271645),t=e.i(469701),s=e.i(554858),l=e.i(644075),i=e.i(167881),d=e.i(70051),r=e.i(630374),o=e.i(23750),c=e.i(10708);let m=["Senin","Selasa","Rabu","Kamis","Jumat","Sabtu","Minggu"],u=m.slice(0,5),h=m.slice(5),g=(e,a,n)=>Math.max(a,Math.min(n,Math.round(e)));function x(){return"undefined"!=typeof crypto&&"function"==typeof crypto.randomUUID?crypto.randomUUID():`ov_${Math.random().toString(36).slice(2,10)}`}function p(e){return[...e].sort((e,a)=>e.start_date===a.start_date?e.end_date.localeCompare(a.end_date):e.start_date.localeCompare(a.start_date))}function v(){let{t:e,locale:v}=(0,t.useI18n)(),[b,f]=(0,n.useState)(!1),[_,j]=(0,n.useState)(!1),[S,N]=(0,n.useState)(10),[y,k]=(0,n.useState)(5),w=(a,n=10,t=5)=>{let s=h.includes(a);return{day:a,label:s?e("adminSchedule.defaults.holidayLabel","Holiday / Off"):e("adminSchedule.defaults.workdayLabel","Normal Working Hours"),enabled:!s,check_in:s?"":"08:30",check_out:s?"":"17:00",grace_in_min:s?0:n,grace_out_min:s?0:t,notes:s?e("adminSchedule.defaults.weekendNotes","Weekend off"):""}},D=(e,a,n)=>{let t=new Map;return(e||[]).forEach(e=>{e?.day&&t.set(e.day,e)}),m.map(e=>{let s=w(e,a,n),l=t.get(e)||{},i=l.enabled??s.enabled;return{day:e,label:String(l.label??s.label),enabled:i,check_in:i?en.test(String(l.check_in||s.check_in))?String(l.check_in||s.check_in):s.check_in:"",check_out:i?en.test(String(l.check_out||s.check_out))?String(l.check_out||s.check_out):s.check_out:"",grace_in_min:i?g(Number(l.grace_in_min??s.grace_in_min),0,240):0,grace_out_min:i?g(Number(l.grace_out_min??s.grace_out_min),0,240):0,notes:String(l.notes??s.notes??"")}})},[C,O]=(0,n.useState)(()=>[]),[L,H]=(0,n.useState)([]),[I,M]=(0,n.useState)([]),[B,T]=(0,n.useState)([]),[J,z]=(0,n.useState)("Senin"),A=(0,n.useCallback)(async()=>{f(!0);try{let a=await (0,s.request)("/admin/attendance/schedule",{method:"GET"}),n=a?.attendance||{},t=g(Number(n.grace_in_min??10),0,240),l=g(Number(n.grace_out_min??5),0,240);N(t),k(l);let i=D(n.rules||[],t,l);O(i),H(JSON.parse(JSON.stringify(i)));let d=n.overrides||[],r=p(d.map(a=>({id:String(a.id||x()),start_date:String(a.start_date||""),end_date:String(a.end_date||a.start_date||""),label:String(a.label||e("adminSchedule.overrides.defaultLabel","Custom Schedule")),enabled:!1!==a.enabled,check_in:!1!==a.enabled?a.check_in??null:null,check_out:!1!==a.enabled?a.check_out??null:null,grace_in_min:!1!==a.enabled?g(Number(a.grace_in_min??t),0,240):0,grace_out_min:!1!==a.enabled?g(Number(a.grace_out_min??l),0,240):0,notes:String(a.notes||""),targets:Array.isArray(a.targets)?a.targets:[]})));M(r),T(JSON.parse(JSON.stringify(r)))}catch(a){console.error(a),l.toast.error(e("adminSchedule.error.load","Gagal memuat konfigurasi jadwal."))}finally{f(!1)}},[e]);(0,n.useEffect)(()=>{A()},[A]);let E=(0,n.useMemo)(()=>C.find(e=>e.day===J)||null,[C,J]),$=(0,n.useMemo)(()=>JSON.stringify(C)!==JSON.stringify(L)||JSON.stringify(I)!==JSON.stringify(B)||S!==(L[0]?.grace_in_min??10)||y!==(L[0]?.grace_out_min??5),[C,L,I,B,S,y]),K=(e,a)=>{O(n=>n.map(n=>{if(n.day!==e)return n;let t=a.enabled??n.enabled,s={...n,...a,enabled:t,check_in:t?void 0!==a.check_in?en.test(String(a.check_in))?String(a.check_in):n.check_in||"08:30":n.check_in:"",check_out:t?void 0!==a.check_out?en.test(String(a.check_out))?String(a.check_out):n.check_out||"17:00":n.check_out:"",grace_in_min:t?g(Number(a.grace_in_min??n.grace_in_min),0,240):0,grace_out_min:t?g(Number(a.grace_out_min??n.grace_out_min),0,240):0};return t||(s.check_in="",s.check_out=""),s}))},F=a=>{if(!E)return;let n={workday:{enabled:!0,label:e("adminSchedule.presets.workday.dataLabel","Jam Kerja Normal"),check_in:"08:30",check_out:"17:00",grace_in_min:10,grace_out_min:5,notes:""},halfday:{enabled:!0,label:e("adminSchedule.presets.halfday.dataLabel","Shift Pagi"),check_in:"08:30",check_out:"13:00",grace_in_min:5,grace_out_min:0,notes:e("adminSchedule.presets.halfday.notes","Shift pagi setengah hari.")},evening:{enabled:!0,label:e("adminSchedule.presets.evening.dataLabel","Shift Sore"),check_in:"13:00",check_out:"21:00",grace_in_min:5,grace_out_min:5,notes:e("adminSchedule.presets.evening.notes","Shift sore / penutupan.")},wfh:{enabled:!0,label:e("adminSchedule.presets.wfh.dataLabel","WFH Fleksibel"),check_in:"09:00",check_out:"17:00",grace_in_min:30,grace_out_min:10,notes:e("adminSchedule.presets.wfh.notes","WFH dengan toleransi keterlambatan 30 menit.")},off:{enabled:!1,label:e("adminSchedule.presets.off.dataLabel","Hari Libur"),check_in:"",check_out:"",grace_in_min:0,grace_out_min:0,notes:e("adminSchedule.presets.off.notes","Tidak ada jam kerja terjadwal.")}};K(E.day,n[a]),l.toast.success(e("adminSchedule.toast.presetApplied","Preset diterapkan."))},R=a=>{E&&(O(e=>e.map(e=>a.includes(e.day)?{...e,label:E.label,enabled:E.enabled,check_in:E.check_in,check_out:E.check_out,grace_in_min:E.grace_in_min,grace_out_min:E.grace_out_min,notes:E.notes}:e)),l.toast.success(e("adminSchedule.toast.appliedToDays","Diterapkan ke hari yang dipilih.")))},Y=async()=>{j(!0);try{let a=/^\d{4}-\d{2}-\d{2}$/;for(let n of I)if(n.enabled){if(!n.start_date||!a.test(n.start_date)){l.toast.error(e("adminSchedule.validation.ovStart","Tanggal mulai override harus diisi (YYYY-MM-DD).")),j(!1);return}if(n.end_date&&!a.test(n.end_date)){l.toast.error(e("adminSchedule.validation.ovEnd","Tanggal akhir override tidak valid (YYYY-MM-DD).")),j(!1);return}}let n={grace_in_min:g(S,0,240),grace_out_min:g(y,0,240),rules:C.map(a=>({day:a.day,label:a.label.trim()||e("adminSchedule.defaults.workdayLabel","Jam Kerja Normal"),enabled:a.enabled,check_in:a.enabled&&en.test(a.check_in)?a.check_in:null,check_out:a.enabled&&en.test(a.check_out)?a.check_out:null,grace_in_min:a.enabled?g(a.grace_in_min,0,240):0,grace_out_min:a.enabled?g(a.grace_out_min,0,240):0,...a.notes&&a.notes.trim()?{notes:a.notes.trim()}:{}})),overrides:p(I).map(a=>{let n=String(a.id||"").match(/^\d+$/)?Number(a.id):void 0,t=Array.isArray(a.targets)?a.targets.map(e=>"object"==typeof e?e?.value??e?.id??e?.person_id??null:e).filter(Boolean).map(e=>String(e).match(/^\d+$/)?Number(e):String(e)):[],s={start_date:a.start_date,end_date:a.end_date||a.start_date,label:a.label||e("adminSchedule.overrides.defaultLabel","Jadwal Khusus"),enabled:a.enabled,check_in:a.enabled?a.check_in:null,check_out:a.enabled?a.check_out:null,grace_in_min:a.enabled?g(a.grace_in_min,0,240):0,grace_out_min:a.enabled?g(a.grace_out_min,0,240):0,notes:a.notes||"",targets:t};return null!=n&&(s.id=n),s})},t=await (0,s.request)("/admin/attendance/schedule",{method:"PUT",body:n,headers:{"Content-Type":"application/json"}}),i=t?.attendance||{},d=g(Number(i.grace_in_min??n.grace_in_min),0,240),r=g(Number(i.grace_out_min??n.grace_out_min),0,240);N(d),k(r);let o=D(i.rules||n.rules,d,r);O(o),H(JSON.parse(JSON.stringify(o)));let c=i.overrides||n.overrides,m=p(c.map(e=>({...e,id:String(e.id||x())})));M(m),T(JSON.parse(JSON.stringify(m))),l.toast.success(e("adminSchedule.toast.saved","Jadwal tersimpan."))}catch(n){console.error("[SCHEDULE_SAVE] Error:",n);let a=n?.message||n?.data?.message||n?.response?.data?.message||"Gagal menyimpan jadwal.";l.toast.error(e("adminSchedule.error.save","Gagal menyimpan jadwal.")+`
${a}`)}finally{j(!1)}},G=()=>{O(JSON.parse(JSON.stringify(L))),M(JSON.parse(JSON.stringify(B))),N(L[0]?.grace_in_min??10),k(L[0]?.grace_out_min??5)},P=e("adminSchedule.overrides.title","Schedule Overrides"),W=(0,n.useMemo)(()=>{let e=v||("undefined"!=typeof navigator?navigator.language:"en-US");return new Intl.DateTimeFormat(e,{weekday:"short",day:"2-digit",month:"short",year:"numeric"})},[v]),[U,q]=(0,n.useState)({open:!1,ov:null}),[V,Q]=(0,n.useState)({open:!1,ov:null}),[X,Z]=(0,n.useState)({open:!1,ov:null}),[ee,ea]=(0,n.useState)({open:!1,ov:null}),en=/^([01]\d|2[0-3]):([0-5]\d)$/,et=()=>{if(!V.ov)return;let a=V.ov,n=String(a.start_date||"").trim(),t=String((a.singleDay?a.start_date:a.end_date)||n);if(!n)return void l.toast.error(e("adminSchedule.validation.ovStart","Tanggal mulai override harus diisi (YYYY-MM-DD)."));if(a.enabled){let n=String(a.check_in||"").trim(),t=String(a.check_out||"").trim();if(!en.test(n))return void l.toast.error(e("adminSchedule.validation.checkIn","Jam masuk harus format HH:MM."));if(!en.test(t))return void l.toast.error(e("adminSchedule.validation.checkOut","Jam pulang harus format HH:MM."));let s=e=>60*Number(e.slice(0,2))+Number(e.slice(3,5));if(s(t)<=s(n))return void l.toast.error(e("adminSchedule.validation.order","Jam pulang harus lebih besar dari jam masuk."))}let s={id:a.id,start_date:n,end_date:t,label:a.label||e("adminSchedule.overrides.defaultLabel","Jadwal Khusus"),enabled:!!a.enabled,check_in:a.enabled?a.check_in||"08:30":null,check_out:a.enabled?a.check_out||"17:00":null,grace_in_min:a.enabled?Math.max(0,Math.min(240,Math.round(a.grace_in_min??0))):0,grace_out_min:a.enabled?Math.max(0,Math.min(240,Math.round(a.grace_out_min??0))):0,notes:String(a.notes||""),targets:"individual"===a.scope&&Array.isArray(a.targets)?a.targets:[]};M(e=>e.some(e=>e.id===s.id)?e.map(e=>e.id===s.id?{...s}:e):p([...e||[],{...s}])),Q({open:!1,ov:null}),l.toast.success(e("adminSchedule.overrides.saved","Override tersimpan."))},es=()=>{let a=X.ov?.id;a&&M(e=>e.filter(e=>e.id!==a)),Z({open:!1,ov:null}),l.toast.success(e("adminSchedule.overrides.deleted","Override dihapus."))},el=async()=>{try{l.toast.success(e("adminSchedule.logs.deleted","Log dihapus."))}catch{l.toast.error(e("adminSchedule.logs.deleteFailed","Gagal menghapus log."))}finally{ea({open:!1,ov:null})}};return(0,a.jsxs)("div",{className:"space-y-6",children:[(0,a.jsxs)("div",{className:"flex items-center justify-end gap-2",children:[(0,a.jsx)(i.Button,{variant:"outline",onClick:()=>{O(m.map(e=>w(e,10,5))),M([]),N(10),k(5)},children:e("adminSchedule.actions.resetDefault","Reset to Default")}),(0,a.jsx)(i.Button,{className:"bg-orange-500 hover:bg-orange-600 text-white",onClick:G,disabled:!$,children:e("adminSchedule.actions.discard","Discard Changes")}),(0,a.jsx)(i.Button,{onClick:Y,disabled:!$,children:e("adminSchedule.actions.saveSchedule","Save Schedule")})]}),(0,a.jsxs)("div",{className:"border rounded-lg bg-card",children:[(0,a.jsxs)("div",{className:"p-4 border-b flex items-center justify-between",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("div",{className:"text-sm font-semibold",children:P}),(0,a.jsx)("div",{className:"text-xs text-muted-foreground",children:e("adminSchedule.overrides.description","Tambah rentang tanggal untuk menimpa jadwal mingguan (libur, WFH, lembur).")}),(0,a.jsx)(r.Dialog,{open:U.open,onOpenChange:e=>!e&&q({open:!1,ov:null}),children:(0,a.jsxs)(r.DialogContent,{className:"max-w-lg",hideOverlay:!0,onEscapeKeyDown:()=>q({open:!1,ov:null}),children:[(0,a.jsx)(r.DialogHeader,{children:(0,a.jsx)(r.DialogTitle,{children:e("adminSchedule.modals.view.title","View Override")})}),U.ov&&(0,a.jsxs)("div",{className:"grid gap-3 text-sm",children:[(0,a.jsxs)("div",{className:"flex justify-between",children:[(0,a.jsx)("span",{children:e("adminSchedule.overrides.label","Label")}),(0,a.jsx)("span",{className:"font-medium",children:U.ov.label})]}),(0,a.jsxs)("div",{className:"flex justify-between",children:[(0,a.jsx)("span",{children:e("adminSchedule.overrides.range","Date Range")}),(0,a.jsxs)("span",{className:"font-medium",children:[U.ov.start_date," ",U.ov.end_date&&U.ov.end_date!==U.ov.start_date?`→ ${U.ov.end_date}`:""]})]}),(0,a.jsxs)("div",{className:"flex justify-between",children:[(0,a.jsx)("span",{children:e("adminSchedule.overrides.status","Status")}),(0,a.jsx)("span",{className:"font-medium",children:U.ov.enabled?e("adminSchedule.common.onLabel","Hari Masuk"):e("adminSchedule.common.offLabel","Hari Libur")})]}),(0,a.jsxs)("div",{className:"flex justify-between",children:[(0,a.jsx)("span",{children:e("adminSchedule.overrides.hours","Hours")}),(0,a.jsxs)("span",{className:"font-medium",children:[U.ov.check_in||"—"," - ",U.ov.check_out||"—"]})]}),(0,a.jsxs)("div",{className:"flex justify-between",children:[(0,a.jsx)("span",{children:e("adminSchedule.overrides.grace","Grace (In/Out)")}),(0,a.jsxs)("span",{className:"font-medium",children:[U.ov.grace_in_min," / ",U.ov.grace_out_min]})]}),U.ov.notes&&(0,a.jsxs)("div",{children:[(0,a.jsx)("div",{className:"text-muted-foreground",children:e("adminSchedule.overrides.notes","Notes")}),(0,a.jsx)("div",{className:"font-medium",children:U.ov.notes})]})]}),(0,a.jsx)(r.DialogFooter,{children:(0,a.jsx)(i.Button,{variant:"outline",onClick:()=>q({open:!1,ov:null}),children:e("common.close","Close")})})]})}),(0,a.jsx)(r.Dialog,{open:V.open,onOpenChange:e=>e?null:Q({open:!1,ov:null}),children:(0,a.jsxs)(r.DialogContent,{className:"max-w-3xl bg-background",hideOverlay:!0,onEscapeKeyDown:()=>Q({open:!1,ov:null}),onKeyDown:e=>{"Enter"===e.key&&(e.preventDefault(),et())},children:[(0,a.jsx)(r.DialogHeader,{children:(0,a.jsx)(r.DialogTitle,{children:e("adminSchedule.overrides.modal.title","Override Jadwal")})}),V.ov&&(0,a.jsxs)("div",{className:"grid gap-4 sm:grid-cols-2",children:[(0,a.jsxs)("div",{className:"space-y-1",children:[(0,a.jsx)(c.Label,{className:"text-xs font-semibold",children:e("adminSchedule.overrides.form.label","Label")}),(0,a.jsx)(o.Input,{value:V.ov.label,onChange:e=>Q(a=>({...a,ov:{...a.ov,label:e.target.value}}))})]}),(0,a.jsxs)("div",{className:"space-y-1",children:[(0,a.jsx)(c.Label,{className:"text-xs font-semibold",children:e("adminSchedule.overrides.form.range","Date Range")}),(0,a.jsxs)("div",{className:"grid grid-cols-2 gap-2",children:[(0,a.jsx)(o.Input,{type:"date",value:V.ov.start_date,onChange:e=>Q(a=>({...a,ov:{...a.ov,start_date:e.target.value,end_date:a.ov?.singleDay?e.target.value:a.ov?.end_date||e.target.value}}))}),(0,a.jsx)(o.Input,{type:"date",value:V.ov.singleDay?V.ov.start_date:V.ov.end_date,disabled:!!V.ov.singleDay,onChange:e=>Q(a=>({...a,ov:{...a.ov,end_date:e.target.value}}))})]})]}),(0,a.jsx)("div",{className:"space-y-1",children:(0,a.jsxs)(c.Label,{className:"text-xs font-semibold flex items-center gap-2",children:[(0,a.jsx)("input",{type:"checkbox",checked:!!V.ov.singleDay,onChange:e=>Q(a=>({...a,ov:{...a.ov,singleDay:e.target.checked,end_date:e.target.checked?a.ov?.start_date||"":a.ov?.end_date||a.ov?.start_date||""}}))}),e("adminSchedule.overrides.form.singleDay","Single Day")]})}),(0,a.jsx)("div",{className:"space-y-1",children:(0,a.jsxs)("div",{className:"flex items-center gap-3 mt-6",children:[(0,a.jsx)("span",{className:"text-xs text-muted-foreground",children:e("adminSchedule.common.offLabel","Hari Libur")}),(0,a.jsx)("input",{type:"checkbox",className:"h-4 w-4",checked:!!V.ov.enabled,onChange:e=>Q(a=>({...a,ov:{...a.ov,enabled:e.target.checked}}))}),(0,a.jsx)("span",{className:"text-xs text-muted-foreground",children:e("adminSchedule.common.onLabel","Hari Masuk")})]})}),(0,a.jsxs)("div",{className:"space-y-1",children:[(0,a.jsx)(c.Label,{className:"text-xs font-semibold",children:e("adminSchedule.overrides.form.checkIn","Check In")}),(0,a.jsx)(o.Input,{type:"time",value:V.ov.check_in??"",disabled:!V.ov.enabled,onChange:e=>Q(a=>({...a,ov:{...a.ov,check_in:e.target.value}}))})]}),(0,a.jsxs)("div",{className:"space-y-1",children:[(0,a.jsx)(c.Label,{className:"text-xs font-semibold",children:e("adminSchedule.overrides.form.checkOut","Check Out")}),(0,a.jsx)(o.Input,{type:"time",value:V.ov.check_out??"",disabled:!V.ov.enabled,onChange:e=>Q(a=>({...a,ov:{...a.ov,check_out:e.target.value}}))})]}),(0,a.jsxs)("div",{className:"space-y-1",children:[(0,a.jsx)(c.Label,{className:"text-xs font-semibold",children:e("adminSchedule.overrides.form.graceIn","Grace In (minutes)")}),(0,a.jsx)(o.Input,{type:"number",value:V.ov.grace_in_min,disabled:!V.ov.enabled,onChange:e=>Q(a=>({...a,ov:{...a.ov,grace_in_min:g(Number(e.target.value),0,240)}}))})]}),(0,a.jsxs)("div",{className:"space-y-1",children:[(0,a.jsx)(c.Label,{className:"text-xs font-semibold",children:e("adminSchedule.overrides.form.graceOut","Grace Out (minutes)")}),(0,a.jsx)(o.Input,{type:"number",value:V.ov.grace_out_min,disabled:!V.ov.enabled,onChange:e=>Q(a=>({...a,ov:{...a.ov,grace_out_min:g(Number(e.target.value),0,240)}}))})]}),(0,a.jsxs)("div",{className:"space-y-1 sm:col-span-2",children:[(0,a.jsx)(c.Label,{className:"text-xs font-semibold",children:e("adminSchedule.overrides.form.notes","Notes")}),(0,a.jsx)("textarea",{rows:3,className:"w-full rounded-md border p-2 text-sm",placeholder:e("adminSchedule.form.notesPlaceholder","Optional"),value:V.ov.notes||"",onChange:e=>Q(a=>({...a,ov:{...a.ov,notes:e.target.value}}))})]}),(0,a.jsxs)("div",{className:"space-y-1 sm:col-span-2",children:[(0,a.jsx)(c.Label,{className:"text-xs font-semibold",children:e("adminSchedule.overrides.form.scope","Applies to")}),(0,a.jsxs)("div",{className:"flex gap-2",children:[(0,a.jsx)(i.Button,{type:"button",size:"sm",variant:"all"===V.ov.scope?"default":"outline",onClick:()=>Q(e=>({...e,ov:{...e.ov,scope:"all",targets:[]}})),children:e("adminSchedule.overrides.scope.all","Applies to everyone")}),(0,a.jsx)(i.Button,{type:"button",size:"sm",variant:"individual"===V.ov.scope?"default":"outline",onClick:()=>Q(e=>({...e,ov:{...e.ov,scope:"individual"}})),children:e("adminSchedule.overrides.scope.individual","Specific people")})]}),(0,a.jsx)("p",{className:"text-xs text-muted-foreground",children:"individual"===V.ov.scope?e("adminSchedule.overrides.form.scopeHelpIndividual","Select specific members that receive this override."):e("adminSchedule.overrides.form.scopeHelpAll","Override applies to every member.")})]})]}),(0,a.jsxs)(r.DialogFooter,{children:[(0,a.jsx)(i.Button,{variant:"outline",onClick:()=>Q({open:!1,ov:null}),children:e("common.cancel","Cancel")}),(0,a.jsx)(i.Button,{onClick:et,children:e("common.save","Save")})]})]})}),(0,a.jsx)(r.Dialog,{open:X.open,onOpenChange:e=>!e&&Z({open:!1,ov:null}),children:(0,a.jsxs)(r.DialogContent,{className:"max-w-md bg-background",hideOverlay:!0,onEscapeKeyDown:()=>Z({open:!1,ov:null}),onKeyDown:e=>{"Enter"===e.key&&(e.preventDefault(),es())},children:[(0,a.jsx)(r.DialogHeader,{children:(0,a.jsx)(r.DialogTitle,{children:e("adminSchedule.modals.deleteOverride.title","Delete Override?")})}),(0,a.jsx)("div",{className:"text-sm text-muted-foreground",children:e("adminSchedule.modals.deleteOverride.body","Tindakan ini akan menghapus override terpilih. Lanjutkan?")}),(0,a.jsxs)(r.DialogFooter,{children:[(0,a.jsx)(i.Button,{variant:"outline",onClick:()=>Z({open:!1,ov:null}),children:e("common.cancel","Cancel")}),(0,a.jsx)(i.Button,{variant:"destructive",onClick:es,children:e("common.delete","Delete")})]})]})}),(0,a.jsx)(r.Dialog,{open:ee.open,onOpenChange:e=>!e&&ea({open:!1,ov:null}),children:(0,a.jsxs)(r.DialogContent,{className:"max-w-md bg-background",hideOverlay:!0,onEscapeKeyDown:()=>ea({open:!1,ov:null}),onKeyDown:e=>{"Enter"===e.key&&(e.preventDefault(),el())},children:[(0,a.jsx)(r.DialogHeader,{children:(0,a.jsx)(r.DialogTitle,{children:e("adminSchedule.modals.deleteLog.title","Delete Log?")})}),(0,a.jsx)("div",{className:"text-sm text-muted-foreground",children:e("adminSchedule.modals.deleteLog.body","Tindakan ini akan menghapus log terkait jadwal ini. Lanjutkan?")}),(0,a.jsxs)(r.DialogFooter,{children:[(0,a.jsx)(i.Button,{variant:"outline",onClick:()=>ea({open:!1,ov:null}),children:e("common.cancel","Cancel")}),(0,a.jsx)(i.Button,{variant:"destructive",onClick:el,children:e("adminSchedule.actions.deleteLog","Delete Log")})]})]})})]}),(0,a.jsxs)(i.Button,{size:"sm",onClick:()=>{Q({open:!0,ov:{id:x(),start_date:new Date().toISOString().slice(0,10),end_date:new Date().toISOString().slice(0,10),label:e("adminSchedule.overrides.defaultLabel","Jadwal Khusus"),enabled:!0,check_in:"08:30",check_out:"17:00",grace_in_min:S,grace_out_min:y,notes:"",targets:[],singleDay:!0,scope:"all"}})},children:[(0,a.jsx)(d.Icon,{name:"Plus",className:"h-4 w-4 mr-2"}),e("adminSchedule.overrides.add","Add Override")]})]}),(0,a.jsx)("div",{className:"p-2 overflow-x-auto",children:(0,a.jsxs)("table",{className:"w-full",children:[(0,a.jsx)("thead",{className:"text-xs text-muted-foreground border-b",children:(0,a.jsxs)("tr",{children:[(0,a.jsx)("th",{className:"text-left p-2",children:e("adminSchedule.overrides.range","Date Range")}),(0,a.jsx)("th",{className:"text-left p-2",children:e("adminSchedule.overrides.label","Label")}),(0,a.jsx)("th",{className:"text-left p-2",children:e("adminSchedule.overrides.status","Status")}),(0,a.jsx)("th",{className:"text-left p-2",children:e("adminSchedule.overrides.hours","Hours")}),(0,a.jsx)("th",{className:"text-left p-2",children:e("adminSchedule.overrides.grace","Grace (In/Out)")}),(0,a.jsx)("th",{className:"text-left p-2",children:e("adminSchedule.overrides.notes","Notes")}),(0,a.jsx)("th",{className:"text-right p-2",children:e("common.actions","Actions")})]})}),(0,a.jsx)("tbody",{children:0===I.length?(0,a.jsx)("tr",{children:(0,a.jsx)("td",{colSpan:7,className:"p-6 text-center text-sm text-muted-foreground",children:e("adminSchedule.overrides.empty","Belum ada override")})}):I.map(n=>(0,a.jsxs)("tr",{className:"border-b align-top",children:[(0,a.jsx)("td",{className:"p-2 text-sm whitespace-nowrap",children:(0,a.jsxs)("div",{children:[n.start_date?W.format(new Date(n.start_date)):"—",n.end_date&&n.end_date!==n.start_date?` \xbb ${W.format(new Date(n.end_date))}`:""]})}),(0,a.jsx)("td",{className:"p-2 text-sm",children:(0,a.jsxs)("div",{className:"flex items-center gap-2",children:[(0,a.jsx)("div",{className:"font-semibold uppercase",children:n.label}),!n.enabled&&(0,a.jsx)("span",{className:"text-[10px] px-2 py-1 rounded-full bg-red-100 text-red-700",children:e("adminSchedule.overrides.offSummary","Off / Holiday")})]})}),(0,a.jsx)("td",{className:"p-2",children:(0,a.jsx)("span",{className:`text-xs px-2 py-1 rounded-full ${n.enabled?"bg-emerald-100 text-emerald-700":"bg-gray-100 text-gray-700"}`,children:n.enabled?e("adminSchedule.common.onLabel","Hari Masuk"):e("adminSchedule.common.offLabel","Hari Libur")})}),(0,a.jsx)("td",{className:"p-2 text-sm",children:n.enabled&&n.check_in&&n.check_out?(0,a.jsxs)("span",{children:[n.check_in," - ",n.check_out]}):(0,a.jsx)("span",{className:"text-muted-foreground",children:"—"})}),(0,a.jsx)("td",{className:"p-2 text-sm",children:n.enabled?(0,a.jsxs)("span",{children:[n.grace_in_min||0," / ",n.grace_out_min||0]}):(0,a.jsx)("span",{className:"text-muted-foreground",children:"—"})}),(0,a.jsx)("td",{className:"p-2 text-sm",children:n.notes?.trim()?n.notes:(0,a.jsx)("span",{className:"text-muted-foreground",children:"—"})}),(0,a.jsx)("td",{className:"p-2 text-right",children:(0,a.jsxs)("div",{className:"inline-flex flex-wrap gap-2 justify-end",children:[(0,a.jsx)(i.Button,{size:"sm",onClick:()=>Q({open:!0,ov:{...n,singleDay:!n.end_date||n.end_date===n.start_date,scope:n.targets&&n.targets.length?"individual":"all"}}),className:"bg-orange-500 hover:bg-orange-600 text-white",title:e("adminSchedule.actions.editOverride","Edit Override"),"aria-label":e("adminSchedule.actions.editOverride","Edit Override"),children:(0,a.jsx)(d.Icon,{name:"Pencil",className:"h-4 w-4"})}),(0,a.jsx)(i.Button,{size:"sm",variant:"outline",onClick:()=>{var e;return e=n.id,void M(a=>{let n=a.find(a=>a.id===e);return n?p([...a,{...n,id:x(),label:`${n.label}`}]):a})},title:e("common.duplicate","Duplicate"),"aria-label":e("common.duplicate","Duplicate"),children:(0,a.jsx)(d.Icon,{name:"Copy",className:"h-4 w-4"})}),(0,a.jsx)(i.Button,{variant:"destructive",size:"sm",onClick:()=>Z({open:!0,ov:n}),title:e("adminSchedule.actions.deleteOverride","Delete Override"),"aria-label":e("adminSchedule.actions.deleteOverride","Delete Override"),children:(0,a.jsx)(d.Icon,{name:"Trash2",className:"h-4 w-4"})})]})})]},n.id))})]})})]}),(0,a.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[(0,a.jsx)("div",{className:"border rounded-lg p-2 md:col-span-1 bg-card",children:(0,a.jsx)("div",{className:"divide-y",children:m.map(n=>{let t=C.find(e=>e.day===n),s=J===n,l=t?.enabled?e("adminSchedule.badge.work","Working Day"):e("adminSchedule.badge.holiday","Holiday / Off"),i=t?.enabled?`${t.check_in} - ${t.check_out}`:e("adminSchedule.badge.noSchedule","No schedule");return(0,a.jsxs)("button",{className:`w-full text-left p-3 flex items-center justify-between ${s?"bg-accent":"hover:bg-muted/50"}`,onClick:()=>z(n),children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("div",{className:"font-medium",children:e(`adminSchedule.week.${n}`,n)}),(0,a.jsx)("div",{className:"text-xs text-muted-foreground",children:i})]}),(0,a.jsx)("span",{className:`text-xs px-2 py-1 rounded-full ${t?.enabled?"bg-emerald-100 text-emerald-700":"bg-gray-100 text-gray-700"}`,children:l})]},n)})})}),(0,a.jsxs)("div",{className:"border rounded-lg p-4 md:col-span-2 bg-card",children:[(0,a.jsxs)("div",{className:"flex items-center justify-between mb-3",children:[(0,a.jsx)("div",{className:"text-lg font-semibold",children:e(`adminSchedule.week.${J}`,J)}),(0,a.jsxs)("div",{className:"flex items-center gap-2",children:[(0,a.jsx)("span",{className:"text-sm",children:e("adminSchedule.common.workingDay","Working Day")}),(0,a.jsxs)("select",{className:"h-8 rounded-md border px-2 text-sm",value:E?.enabled?"on":"off",onChange:e=>K(J,{enabled:"on"===e.target.value}),children:[(0,a.jsx)("option",{value:"on",children:e("adminSchedule.common.onLabel","Hari Masuk")}),(0,a.jsx)("option",{value:"off",children:e("adminSchedule.common.offLabel","Hari Libur")})]})]})]}),(0,a.jsxs)("div",{className:"flex flex-wrap gap-2 mb-4",children:[(0,a.jsx)(i.Button,{variant:"outline",size:"sm",onClick:()=>F("workday"),children:e("adminSchedule.presets.workday.label","Normal Hours")}),(0,a.jsx)(i.Button,{variant:"outline",size:"sm",onClick:()=>F("halfday"),children:e("adminSchedule.presets.halfday.label","Morning Shift")}),(0,a.jsx)(i.Button,{variant:"outline",size:"sm",onClick:()=>F("evening"),children:e("adminSchedule.presets.evening.label","Evening Shift")}),(0,a.jsx)(i.Button,{variant:"outline",size:"sm",onClick:()=>F("wfh"),children:e("adminSchedule.presets.wfh.label","Flexible WFH")}),(0,a.jsx)(i.Button,{variant:"outline",size:"sm",onClick:()=>F("off"),children:e("adminSchedule.presets.off.label","Holiday / Off")})]}),(0,a.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[(0,a.jsxs)("label",{className:"space-y-1",children:[(0,a.jsx)("div",{className:"text-sm font-medium",children:e("adminSchedule.form.label","Schedule Label")}),(0,a.jsx)("input",{className:"h-9 w-full rounded-md border px-3 text-sm",value:E?.label||"",onChange:e=>K(J,{label:e.target.value})})]}),(0,a.jsx)("div",{}),(0,a.jsxs)("label",{className:"space-y-1",children:[(0,a.jsx)("div",{className:"text-sm font-medium",children:e("adminSchedule.form.checkIn","Check In")}),(0,a.jsx)("input",{className:"h-9 w-40 rounded-md border px-3 text-sm",placeholder:"08:30",value:E?.check_in||"",onChange:e=>K(J,{check_in:e.target.value})})]}),(0,a.jsxs)("label",{className:"space-y-1",children:[(0,a.jsx)("div",{className:"text-sm font-medium",children:e("adminSchedule.form.checkOut","Check Out")}),(0,a.jsx)("input",{className:"h-9 w-40 rounded-md border px-3 text-sm",placeholder:"17:00",value:E?.check_out||"",onChange:e=>K(J,{check_out:e.target.value})})]}),(0,a.jsxs)("label",{className:"space-y-1",children:[(0,a.jsx)("div",{className:"text-sm font-medium",children:e("adminSchedule.form.graceIn","Grace In (minutes)")}),(0,a.jsx)("input",{type:"number",className:"h-9 w-32 rounded-md border px-3 text-sm",value:E?.grace_in_min??0,onChange:e=>K(J,{grace_in_min:g(Number(e.target.value),0,240)})})]}),(0,a.jsxs)("label",{className:"space-y-1",children:[(0,a.jsx)("div",{className:"text-sm font-medium",children:e("adminSchedule.form.graceOut","Grace Out (minutes)")}),(0,a.jsx)("input",{type:"number",className:"h-9 w-32 rounded-md border px-3 text-sm",value:E?.grace_out_min??0,onChange:e=>K(J,{grace_out_min:g(Number(e.target.value),0,240)})})]}),(0,a.jsxs)("label",{className:"space-y-1 md:col-span-2",children:[(0,a.jsx)("div",{className:"text-sm font-medium",children:e("adminSchedule.form.notes","Notes")}),(0,a.jsx)("input",{className:"h-9 w-full rounded-md border px-3 text-sm",placeholder:e("adminSchedule.form.notesPlaceholder","Optional"),value:E?.notes||"",onChange:e=>K(J,{notes:e.target.value})})]}),(0,a.jsxs)("div",{className:"md:col-span-2 flex flex-wrap gap-2",children:[(0,a.jsx)(i.Button,{variant:"outline",size:"sm",onClick:()=>R(m),children:e("adminSchedule.actions.copyToAll","Copy to other days")}),(0,a.jsx)(i.Button,{variant:"outline",size:"sm",onClick:()=>R(u),children:e("adminSchedule.actions.applyToWorkdays","Apply to workdays")}),(0,a.jsx)(i.Button,{variant:"outline",size:"sm",onClick:()=>R(h),children:e("adminSchedule.actions.applyToWeekend","Apply to weekend")})]})]}),(0,a.jsx)("div",{className:"mt-6 flex items-center justify-end border-t pt-4",children:(0,a.jsxs)("div",{className:"flex items-center gap-2",children:[(0,a.jsx)(i.Button,{variant:"outline",size:"sm",onClick:G,disabled:b||_||!$,children:e("adminSchedule.actions.discard","Discard Changes")}),(0,a.jsx)(i.Button,{size:"sm",onClick:Y,disabled:b||_,children:_?e("adminSchedule.actions.saving","Menyimpan..."):e("adminSchedule.actions.save","Save Schedule")})]})})]})]})]})}e.s(["default",()=>v])}]);