(globalThis.TURBOPACK||(globalThis.TURBOPACK=[])).push(["object"==typeof document?document.currentScript:void 0,960928,e=>{"use strict";var t=e.i(843476),a=e.i(271645),s=e.i(469701),l=e.i(394315),i=e.i(554858),r=e.i(644075),n=e.i(167881),o=e.i(70051);function d(){let{t:e}=(0,s.useI18n)(),d=(0,l.useConfirmDialog)(),[m,c]=(0,a.useState)([]),[u,h]=(0,a.useState)(!0),[x,p]=(0,a.useState)(""),[g,b]=(0,a.useState)([]),[f,j]=(0,a.useState)(1),[k,v]=(0,a.useState)(1),[N,y]=(0,a.useState)(0),[L,w]=(0,a.useState)(10),[M,S]=(0,a.useState)("desc"),[E,C]=(0,a.useState)(null),[T,U]=(0,a.useState)(""),[I,B]=(0,a.useState)(!1),[P,D]=(0,a.useState)(!1),[R,F]=(0,a.useState)([]),[A,_]=(0,a.useState)(!1),[z,$]=(0,a.useState)(!1),[O,G]=(0,a.useState)({done:0,total:0}),K=a.default.useRef(null),[H,q]=(0,a.useState)(!1),[X,W]=(0,a.useState)(null),[J,Q]=(0,a.useState)(null),[V,Y]=(0,a.useState)(!1),Z=a.default.useRef(null);a.default.useEffect(()=>{if(!H)return;let e=e=>{"Escape"!==e.key||V||es()};return window.addEventListener("keydown",e),()=>window.removeEventListener("keydown",e)},[H,V]);let ee=async(t=1,a="",s,l)=>{try{h(!0);let e=new URLSearchParams;e.set("page",String(t)),e.set("per_page",String(l||L)),e.set("order",s||M),a.trim()&&e.set("q",a.trim());let r=await (0,i.request)(`/register-db-data?${e.toString()}`);c(r.items||[]),j(r.meta?.page||t),v(r.meta?.total_pages||1),y(r.meta?.total||r.items?.length||0)}catch(t){r.toast.error(e("adminListMembers.toast.fetchError","Gagal memuat data anggota"))}finally{h(!1)}},et=()=>{C(null),U(""),B(!1)},ea=async()=>{if(!E)return;let t=T.trim();if(!t)return void r.toast.warn(e("adminListMembers.editLabel.empty","Label tidak boleh kosong"));try{B(!0),await (0,i.request)(`http://localhost:8000/admin/register-db/item/${E}`,{method:"PUT",headers:{Authorization:`Bearer ${localStorage.getItem("api_key")||""}`,"Content-Type":"application/json"},body:{label:t}}),c(e=>e.map(e=>String(e.id)===String(E)?{...e,label:t}:e)),r.toast.success(e("adminListMembers.editLabel.success","Label diperbarui.")),et()}catch(a){let t=a?.message||a?.data?.message||"Gagal menyimpan";r.toast.error(e("adminListMembers.editLabel.error","Gagal menyimpan: {msg}",{msg:t})),B(!1)}},es=()=>{q(!1),W(null),Q(null)},el=async()=>{if(!X||!J)return void r.toast.warn(e("adminListMembers.replacePhoto.noFile","Pilih file terlebih dahulu"));try{Y(!0);let t=new FormData;t.append("label",X.label),t.append("file",J),t.append("force","1"),await (0,i.request)("http://localhost:8000/register-face",{method:"POST",body:t,headers:{Authorization:`Bearer ${localStorage.getItem("api_key")||""}`}}),r.toast.success(e("adminListMembers.replacePhoto.success","Foto berhasil diganti untuk: {label}",{label:X.label})),es(),ee(f,x)}catch(a){let t=a?.message||a?.data?.message||"Unknown error";r.toast.error(e("adminListMembers.replacePhoto.error","Gagal mengganti foto: {error}",{error:t}))}finally{Y(!1)}},ei=async(t,a)=>{if(await d({title:e("adminListMembers.confirm.delete.title","Hapus Anggota"),description:e("adminListMembers.confirm.delete.desc","Apakah Anda yakin ingin menghapus {name}? Tindakan ini tidak dapat dibatalkan.",{name:a}),confirmText:e("adminListMembers.confirm.delete.confirm","Hapus"),cancelText:e("adminListMembers.confirm.delete.cancel","Batal")}))try{console.log("[DELETE] Deleting member ID:",t),await (0,i.request)(`http://localhost:8000/admin/register-db/item/${t}?delete_photo=1`,{method:"DELETE",headers:{Authorization:`Bearer ${localStorage.getItem("api_key")||""}`}}),r.toast.success(e("adminListMembers.toast.deleteSuccess","Anggota berhasil dihapus: {name}",{name:a})),console.log("[DELETE] Success! Refreshing list..."),ee(f,x)}catch(a){console.error("[DELETE] Error:",a);let t=a?.message||a?.data?.message||"Unknown error";r.toast.error(e("adminListMembers.toast.deleteError","Gagal menghapus anggota: {error}",{error:t}))}},er=async()=>{if(0===g.length)return void r.toast.info(e("adminListMembers.toast.noSelection","Tidak ada anggota yang dipilih"));if(await d({title:e("adminListMembers.confirm.deleteMultiple.title","Hapus Beberapa Anggota"),description:e("adminListMembers.confirm.deleteMultiple.desc","Apakah Anda yakin ingin menghapus {count} anggota yang dipilih?",{count:g.length}),confirmText:e("adminListMembers.confirm.deleteMultiple.confirm","Hapus Semua"),cancelText:e("adminListMembers.confirm.deleteMultiple.cancel","Batal")}))try{console.log("[BULK_DELETE] Deleting members:",g),await (0,i.request)("http://localhost:8000/admin/register-db/bulk",{method:"POST",headers:{Authorization:`Bearer ${localStorage.getItem("api_key")||""}`,"Content-Type":"application/json"},body:{action:"delete",ids:g.map(e=>parseInt(e)),delete_photo:!0}}),r.toast.success(e("adminListMembers.toast.deleteMultipleSuccess","{count} anggota berhasil dihapus",{count:g.length})),console.log("[BULK_DELETE] Success! Clearing selection and refreshing..."),b([]),ee(f,x)}catch(a){console.error("[BULK_DELETE] Error:",a);let t=a?.message||a?.data?.message||"Unknown error";r.toast.error(e("adminListMembers.toast.deleteMultipleError","Gagal menghapus anggota: {error}",{error:t}))}},en=async()=>{if(0===g.length)return void r.toast.info(e("adminListMembers.toast.noSelection","Tidak ada anggota yang dipilih"));try{console.log("[EXPORT] Exporting members:",g);let t=await fetch("http://localhost:8000/admin/register-db/bulk",{method:"POST",headers:{Authorization:`Bearer ${localStorage.getItem("api_key")||""}`,"Content-Type":"application/json"},body:JSON.stringify({action:"export",ids:g.map(e=>parseInt(e))})});if(!t.ok)throw Error(`HTTP ${t.status}`);let a=await t.blob();if(!a||0===a.size)return void r.toast.warn(e("adminListMembers.toast.exportEmpty","Tidak ada foto yang bisa diekspor"));let s=(t.headers.get("content-disposition")||"").match(/filename="?([^";]+)"?/i),l=s?s[1]:`register_export_${Date.now()}.zip`,i=URL.createObjectURL(a),n=document.createElement("a");n.href=i,n.download=l,document.body.appendChild(n),n.click(),n.remove(),setTimeout(()=>URL.revokeObjectURL(i),2e3),r.toast.success(e("adminListMembers.toast.exportSuccess","Export selesai: {filename}",{filename:l})),console.log("[EXPORT] Success! Downloaded:",l)}catch(a){console.error("[EXPORT] Error:",a);let t=a?.message||"Unknown error";r.toast.error(e("adminListMembers.toast.exportError","Gagal export: {error}",{error:t}))}},eo=()=>{R.forEach(e=>{e.previewUrl.startsWith("blob:")&&URL.revokeObjectURL(e.previewUrl)}),D(!1),F([]),$(!1),G({done:0,total:0})},ed=async t=>{let a=t.target.files;if(!a||0===a.length)return;let s=[];for(let t=0;t<a.length;t++){let l=a[t];if(!l.type.startsWith("image/")){r.toast.warn(e("adminListMembers.toast.fileNotImage","{name} bukan gambar, dilewati",{name:l.name}));continue}let i=`${Date.now()}-${Math.random().toString(36)}`,n=l.name.replace(/\.[^.]+$/,""),o=URL.createObjectURL(l);s.push({id:i,file:l,name:l.name,label:n,status:"ready",message:e("adminListMembers.bulk.statusReady","Siap diunggah"),previewUrl:o})}F(e=>[...e,...s]),G({done:0,total:R.length+s.length}),t.target&&(t.target.value="")},em=async()=>{if(0===R.length)return void r.toast.info(e("adminListMembers.toast.noBulkItems","Tidak ada file yang dipilih"));_(!0),G({done:0,total:R.length});let t=0,a=0,s=0,l=0;for(let i=0;i<R.length;i++){let r=R[i],n=r.label.trim();if(!n){F(t=>t.map(t=>t.id===r.id?{...t,status:"skip",message:e("adminListMembers.bulk.labelEmpty","Label kosong, dilewati")}:t)),l++,G({done:i+1,total:R.length});continue}F(t=>t.map(t=>t.id===r.id?{...t,status:"uploading",message:e("adminListMembers.bulk.uploading","Mengunggah...")}:t));try{let a=new FormData;a.append("label",n),a.append("file",r.file),a.append("force",z?"1":"0");let s=await fetch("http://localhost:8000/register-face",{method:"POST",headers:{Authorization:`Bearer ${localStorage.getItem("api_key")||""}`},body:a});if(!s.ok){let e=await s.json().catch(()=>({}));throw{status:s.status,message:e.message||`HTTP ${s.status}`}}let l=await s.json();F(t=>t.map(t=>t.id===r.id?{...t,status:"ok",message:e("adminListMembers.bulk.success","Berhasil: {label}",{label:l.label||n}),label:l.label||n}:t)),t++,await new Promise(e=>setTimeout(e,400))}catch(l){let t=l?.message||"Upload gagal";l?.status===409||t.includes("409")?(F(a=>a.map(a=>a.id===r.id?{...a,status:"duplicate",message:e("adminListMembers.bulk.duplicate","Duplikat: {msg}",{msg:t})}:a)),s++):(F(a=>a.map(a=>a.id===r.id?{...a,status:"err",message:e("adminListMembers.bulk.error","Error: {msg}",{msg:t})}:a)),a++)}G({done:i+1,total:R.length})}_(!1);let i=[];t>0&&i.push(e("adminListMembers.bulk.summarySuccess","Sukses: {count}",{count:t})),s>0&&i.push(e("adminListMembers.bulk.summaryDuplicate","Duplikat: {count}",{count:s})),a>0&&i.push(e("adminListMembers.bulk.summaryError","Gagal: {count}",{count:a})),l>0&&i.push(e("adminListMembers.bulk.summarySkip","Lewati: {count}",{count:l})),r.toast.success(e("adminListMembers.bulk.completed","Selesai. {summary}",{summary:i.join(", ")})),ee(f,x)};(0,a.useEffect)(()=>{ee()},[]);let ec=e=>{let t=e.photo_url||e.photo_path||"";if(!t)return"";let a=String(t).replace(/\\/g,"/");return/^https?:\/\//i.test(a)?a:(0,i.resolveApi)(a.replace(/^\/+/,""))};return(0,t.jsxs)("div",{className:"space-y-6",children:[(0,t.jsxs)("div",{className:"flex items-center justify-between",children:[(0,t.jsx)("div",{children:(0,t.jsx)("p",{className:"text-muted-foreground",children:e("adminListMembers.subtitle","Kelola database wajah anggota ({total} anggota)",{total:N})})}),(0,t.jsx)("div",{className:"flex gap-2",children:(0,t.jsxs)(n.Button,{onClick:()=>ee(f,x),variant:"outline",size:"sm",children:[(0,t.jsx)(o.Icon,{name:"RefreshCw",className:"h-4 w-4 mr-2"}),e("adminListMembers.actions.refresh","Refresh")]})})]}),E&&(0,t.jsx)("div",{className:"bg-card rounded-lg border p-4",children:(0,t.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-[120px_1fr] gap-3 items-start",children:[(0,t.jsx)("label",{className:"text-sm font-medium text-muted-foreground md:text-right md:pt-2",children:e("adminListMembers.table.label","Label")}),(0,t.jsxs)("div",{children:[(0,t.jsx)("input",{type:"text",value:T,onChange:e=>U(e.target.value),onKeyDown:e=>{"Enter"===e.key?(e.preventDefault(),I||ea()):"Escape"===e.key&&(e.preventDefault(),I||et())},className:"w-full px-3 py-2 border rounded-lg bg-background",autoFocus:!0}),(0,t.jsxs)("div",{className:"mt-3 flex gap-2",children:[(0,t.jsx)(n.Button,{onClick:ea,disabled:I,children:e("common.save","Save")}),(0,t.jsx)(n.Button,{onClick:et,variant:"outline",disabled:I,children:e("common.cancel","Cancel")})]})]})]})}),(0,t.jsxs)("div",{className:"flex items-center justify-between gap-4",children:[(0,t.jsx)("div",{className:"flex-1 max-w-md",children:(0,t.jsxs)("div",{className:"relative",children:[(0,t.jsx)(o.Icon,{name:"Search",className:"absolute left-3 top-1/2 transform -translate-y-1/2 h-4 w-4 text-muted-foreground"}),(0,t.jsx)("input",{type:"text",placeholder:e("adminListMembers.search.placeholder","Search labelsâ€¦"),value:x,onChange:e=>{var t;p(t=e.target.value),j(1),ee(1,t)},className:"w-full pl-10 pr-4 py-2 border rounded-md"})]})}),(0,t.jsxs)("div",{className:"flex items-center gap-2",children:[(0,t.jsxs)("select",{className:"h-9 rounded-md border px-2 text-sm",value:L,onChange:e=>{let t=Number(e.target.value);w(t),ee(1,x,void 0,t)},children:[(0,t.jsx)("option",{value:10,children:"10"}),(0,t.jsx)("option",{value:20,children:"20"}),(0,t.jsx)("option",{value:50,children:"50"})]}),(0,t.jsxs)("select",{className:"h-9 rounded-md border px-2 text-sm",value:M,onChange:e=>{let t=e.target.value;S(t),ee(1,x,t)},children:[(0,t.jsx)("option",{value:"desc",children:e("adminListMembers.order.newest","Newest")}),(0,t.jsx)("option",{value:"asc",children:e("adminListMembers.order.oldest","Oldest")})]}),(0,t.jsxs)(n.Button,{onClick:()=>{D(!0),F([]),$(!1),G({done:0,total:0})},variant:"outline",size:"sm",children:[(0,t.jsx)(o.Icon,{name:"Upload",className:"h-4 w-4 mr-2"}),e("adminListMembers.actions.bulkUpload","Bulk Upload")]}),(0,t.jsxs)(n.Button,{onClick:er,variant:"destructive",size:"sm",disabled:0===g.length,children:[(0,t.jsx)(o.Icon,{name:"Trash2",className:"h-4 w-4 mr-2"}),e("adminListMembers.actions.deleteSelected","Delete")]}),(0,t.jsxs)(n.Button,{onClick:en,variant:"outline",size:"sm",disabled:0===g.length,children:[(0,t.jsx)(o.Icon,{name:"FileArchive",className:"h-4 w-4 mr-2"}),e("adminListMembers.actions.export","Ekspor")]})]})]}),(0,t.jsxs)("div",{className:"border rounded-lg max-h-[70vh] overflow-auto",children:[(0,t.jsx)("div",{className:"min-w-full",children:(0,t.jsxs)("table",{className:"w-full",children:[(0,t.jsx)("thead",{className:"border-b bg-muted/50",children:(0,t.jsxs)("tr",{children:[(0,t.jsx)("th",{className:"w-12 p-4",children:(0,t.jsx)("input",{type:"checkbox",checked:g.length===m.length&&m.length>0,onChange:()=>{g.length===m.length?b([]):b(m.map(e=>String(e.id)))},className:"rounded"})}),(0,t.jsx)("th",{className:"text-left p-4 font-medium",children:e("adminListMembers.table.label","Label")}),(0,t.jsx)("th",{className:"text-left p-4 font-medium",children:e("adminListMembers.table.photo","Photo")}),(0,t.jsx)("th",{className:"text-left p-4 font-medium",children:e("adminListMembers.table.timestamp","Timestamp")}),(0,t.jsx)("th",{className:"text-left p-4 font-medium",children:e("adminListMembers.table.actions","Aksi")})]})}),(0,t.jsx)("tbody",{children:u?(0,t.jsx)("tr",{children:(0,t.jsx)("td",{colSpan:7,className:"p-8 text-center",children:(0,t.jsx)(o.Icon,{name:"Loader2",className:"h-6 w-6 animate-spin mx-auto"})})}):m.length>0?m.map(a=>(0,t.jsxs)("tr",{className:"border-b hover:bg-muted/50 align-top",children:[(0,t.jsx)("td",{className:"p-4",children:(0,t.jsx)("input",{type:"checkbox",checked:g.includes(String(a.id)),onChange:()=>{var e;return e=String(a.id),void b(t=>t.includes(e)?t.filter(t=>t!==e):[...t,e])},className:"rounded"})}),(0,t.jsx)("td",{className:"p-4",children:(0,t.jsxs)("div",{className:"space-y-1",children:[(0,t.jsx)("div",{className:"font-medium",children:a.label}),(0,t.jsxs)("div",{className:"text-xs text-muted-foreground",children:[e("common.idLabel","ID:")," ",String(a.id)]}),(0,t.jsx)("button",{className:"text-xs text-blue-600 hover:underline",onClick:()=>{C(String(a.id)),U(a.label||"")},children:e("adminListMembers.actions.editLabel","Edit label")})]})}),(0,t.jsx)("td",{className:"p-4",children:(0,t.jsxs)("div",{className:"flex items-center gap-3",children:[ec(a)?(0,t.jsx)("img",{src:ec(a),alt:a.label,className:"h-16 w-16 rounded-md object-cover border"}):(0,t.jsx)("div",{className:"h-16 w-16 rounded-md bg-muted"}),(0,t.jsx)("button",{className:"text-xs text-blue-600 hover:underline",onClick:()=>{W(a),Q(null),q(!0)},children:e("adminListMembers.actions.replacePhoto","Replace photo")})]})}),(0,t.jsx)("td",{className:"p-4 text-sm whitespace-nowrap",children:(e=>{let t=e.ts||e.time||e.timestamp||e.created_at||e.date||"";if(!t)return"-";let a=new Date(String(t).replace(" ","T"));return Number.isNaN(a.getTime())?String(t):a.toLocaleString("id-ID")})(a)}),(0,t.jsx)("td",{className:"p-4",children:(0,t.jsxs)(n.Button,{variant:"destructive",className:"w-32",size:"sm",onClick:()=>ei(String(a.id),a.label),children:[(0,t.jsx)(o.Icon,{name:"Trash2",className:"h-4 w-4 mr-2"}),e("adminListMembers.actions.delete","Delete")]})})]},String(a.id))):(0,t.jsx)("tr",{children:(0,t.jsxs)("td",{colSpan:7,className:"p-8 text-center text-muted-foreground",children:[(0,t.jsx)(o.Icon,{name:"Users",className:"h-12 w-12 mx-auto mb-2 opacity-50"}),(0,t.jsx)("p",{children:e("adminListMembers.table.empty","Belum ada anggota terdaftar")})]})})})]})}),k>1&&(0,t.jsxs)("div",{className:"flex items-center justify-between p-4 border-t",children:[(0,t.jsx)("div",{className:"text-sm text-muted-foreground",children:e("adminListMembers.pagination.info","Menampilkan {start}-{end} dari {total} anggota",{start:(f-1)*20+1,end:Math.min(20*f,N),total:N})}),(0,t.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,t.jsx)(n.Button,{variant:"outline",size:"sm",onClick:()=>ee(f-1,x),disabled:f<=1,children:e("adminListMembers.pagination.previous","Sebelumnya")}),(0,t.jsx)("span",{className:"text-sm",children:e("adminListMembers.pagination.current","Halaman {page} dari {total}",{page:f,total:k})}),(0,t.jsx)(n.Button,{variant:"outline",size:"sm",onClick:()=>ee(f+1,x),disabled:f>=k,children:e("adminListMembers.pagination.next","Selanjutnya")})]})]})]}),H&&X&&(0,t.jsx)("div",{className:"fixed inset-0 z-50 flex items-center justify-center bg-black/50",children:(0,t.jsxs)("div",{className:"bg-background rounded-lg shadow-xl max-w-2xl w-full max-h-[90vh] flex flex-col",children:[(0,t.jsxs)("div",{className:"flex items-center justify-between p-6 border-b dark:border-gray-700",children:[(0,t.jsxs)("div",{children:[(0,t.jsx)("h2",{className:"text-xl font-semibold",children:e("adminListMembers.replacePhoto.title","Ganti Foto")}),(0,t.jsx)("p",{className:"text-sm text-muted-foreground",children:e("adminListMembers.replacePhoto.subtitle","Untuk: {label}",{label:X.label})})]}),(0,t.jsx)("button",{onClick:es,disabled:V,className:"text-gray-500 hover:text-gray-700 dark:text-gray-400 dark:hover:text-gray-200",children:(0,t.jsx)(o.Icon,{name:"X",className:"h-5 w-5"})})]}),(0,t.jsxs)("div",{className:"flex-1 overflow-y-auto p-6 space-y-4",children:[(0,t.jsxs)("div",{className:"flex items-center gap-4",children:[ec(X)?(0,t.jsx)("img",{src:ec(X),alt:X.label,className:"h-32 w-32 rounded-md object-cover border"}):(0,t.jsx)("div",{className:"h-32 w-32 rounded-md bg-muted flex items-center justify-center",children:(0,t.jsx)(o.Icon,{name:"User",className:"h-12 w-12 text-muted-foreground"})}),(0,t.jsxs)("div",{className:"flex-1",children:[(0,t.jsx)("p",{className:"text-sm font-medium mb-2",children:e("adminListMembers.replacePhoto.currentPhoto","Foto saat ini")}),(0,t.jsx)("p",{className:"text-xs text-muted-foreground",children:e("adminListMembers.replacePhoto.hint","Tarik & letakkan foto ke sini atau pilih dari perangkat")})]})]}),(0,t.jsxs)("div",{className:"border-2 border-dashed rounded-lg p-8 text-center cursor-pointer hover:border-primary transition",onClick:()=>Z.current?.click(),children:[(0,t.jsx)("input",{ref:Z,type:"file",accept:"image/*",onChange:e=>{let t=e.target.files?.[0];t&&Q(t)},className:"hidden",disabled:V}),(0,t.jsx)(o.Icon,{name:"Upload",className:"h-12 w-12 mx-auto mb-3 text-muted-foreground"}),J?(0,t.jsxs)("div",{className:"space-y-2",children:[(0,t.jsx)("p",{className:"text-sm font-medium",children:J.name}),(0,t.jsxs)("p",{className:"text-xs text-muted-foreground",children:[(J.size/1024).toFixed(1)," KB"]})]}):(0,t.jsx)("p",{className:"text-sm text-muted-foreground",children:e("adminListMembers.replacePhoto.dragDrop","Tarik & letakkan foto ke sini atau klik untuk memilih")})]}),(0,t.jsxs)("div",{className:"flex items-center gap-3",children:[(0,t.jsxs)(n.Button,{onClick:()=>Z.current?.click(),disabled:V,variant:"outline",className:"flex-1",children:[(0,t.jsx)(o.Icon,{name:"FileImage",className:"h-4 w-4 mr-2"}),e("adminListMembers.replacePhoto.chooseFile","Pilih File")]}),(0,t.jsxs)(n.Button,{disabled:!0,variant:"outline",className:"flex-1",children:[(0,t.jsx)(o.Icon,{name:"Camera",className:"h-4 w-4 mr-2"}),e("adminListMembers.replacePhoto.useCamera","Gunakan Kamera")]})]})]}),(0,t.jsxs)("div",{className:"flex items-center justify-end gap-3 p-6 border-t dark:border-gray-700",children:[(0,t.jsx)(n.Button,{variant:"outline",onClick:es,disabled:V,children:e("common.cancel","Batal")}),(0,t.jsx)(n.Button,{onClick:el,disabled:!J||V,children:V?(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)(o.Icon,{name:"Loader2",className:"h-4 w-4 mr-2 animate-spin"}),e("adminListMembers.replacePhoto.uploading","Mengunggah...")]}):(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)(o.Icon,{name:"Check",className:"h-4 w-4 mr-2"}),e("adminListMembers.replacePhoto.submit","Ganti Sekarang")]})})]})]})}),P&&(0,t.jsx)("div",{className:"fixed inset-0 z-50 flex items-center justify-center bg-black/50",children:(0,t.jsxs)("div",{className:"bg-white dark:bg-gray-800 rounded-lg shadow-xl max-w-4xl w-full max-h-[90vh] flex flex-col",children:[(0,t.jsxs)("div",{className:"flex items-center justify-between p-6 border-b",children:[(0,t.jsxs)("div",{children:[(0,t.jsx)("h2",{className:"text-xl font-semibold",children:e("adminListMembers.bulk.title","Bulk Upload")}),(0,t.jsx)("p",{className:"text-sm text-muted-foreground",children:e("adminListMembers.bulk.description","Upload banyak foto sekaligus")})]}),(0,t.jsx)("button",{onClick:eo,disabled:A,className:"text-gray-500 hover:text-gray-700",children:(0,t.jsx)(o.Icon,{name:"X",className:"h-5 w-5"})})]}),(0,t.jsxs)("div",{className:"flex-1 overflow-y-auto p-6 space-y-4",children:[(0,t.jsxs)("div",{className:"border-2 border-dashed rounded-lg p-8 text-center",children:[(0,t.jsx)("input",{ref:K,type:"file",multiple:!0,accept:"image/*",onChange:ed,className:"hidden",disabled:A}),(0,t.jsxs)(n.Button,{onClick:()=>K.current?.click(),disabled:A,variant:"outline",children:[(0,t.jsx)(o.Icon,{name:"Upload",className:"h-4 w-4 mr-2"}),e("adminListMembers.bulk.selectFiles","Pilih File")]}),(0,t.jsx)("p",{className:"text-sm text-muted-foreground mt-2",children:e("adminListMembers.bulk.hint","Pilih satu atau lebih file gambar")})]}),R.length>0&&(0,t.jsxs)("label",{className:"flex items-center space-x-2",children:[(0,t.jsx)("input",{type:"checkbox",checked:z,onChange:e=>$(e.target.checked),disabled:A,className:"rounded"}),(0,t.jsx)("span",{className:"text-sm",children:e("adminListMembers.bulk.forceUpload","Upload paksa (override duplikat)")})]}),A&&(0,t.jsxs)("div",{className:"space-y-2",children:[(0,t.jsxs)("div",{className:"flex justify-between text-sm",children:[(0,t.jsx)("span",{children:e("adminListMembers.bulk.uploading","Mengunggah...")}),(0,t.jsxs)("span",{children:[O.done," / ",O.total]})]}),(0,t.jsx)("div",{className:"w-full bg-gray-200 rounded-full h-2",children:(0,t.jsx)("div",{className:"bg-blue-600 h-2 rounded-full transition-all",style:{width:`${O.done/O.total*100}%`}})})]}),R.length>0&&(0,t.jsxs)("div",{className:"space-y-2",children:[(0,t.jsx)("h3",{className:"font-semibold text-sm",children:e("adminListMembers.bulk.files","File ({count})",{count:R.length})}),(0,t.jsx)("div",{className:"space-y-2 max-h-96 overflow-y-auto",children:R.map(e=>(0,t.jsxs)("div",{className:`flex items-center gap-4 p-3 border rounded-lg ${"ok"===e.status?"bg-green-50 border-green-200":"err"===e.status?"bg-red-50 border-red-200":"duplicate"===e.status?"bg-yellow-50 border-yellow-200":"uploading"===e.status?"bg-blue-50 border-blue-200":"bg-white"}`,children:[(0,t.jsx)("img",{src:e.previewUrl,alt:e.name,className:"w-16 h-16 object-cover rounded"}),(0,t.jsxs)("div",{className:"flex-1 space-y-1",children:[(0,t.jsx)("input",{type:"text",value:e.label,onChange:t=>{var a,s;return a=e.id,s=t.target.value,void F(e=>e.map(e=>e.id===a?{...e,label:s}:e))},disabled:A||"ok"===e.status,className:"w-full px-2 py-1 text-sm border rounded bg-muted",placeholder:"Label"}),(0,t.jsx)("p",{className:`text-xs ${"ok"===e.status?"text-green-600":"err"===e.status?"text-red-600":"duplicate"===e.status?"text-yellow-600":"uploading"===e.status?"text-blue-600":"text-gray-500"}`,children:e.message})]}),(0,t.jsxs)("div",{className:"text-center w-8",children:["ok"===e.status&&(0,t.jsx)(o.Icon,{name:"CheckCircle2",className:"h-5 w-5 text-green-600"}),"err"===e.status&&(0,t.jsx)(o.Icon,{name:"XCircle",className:"h-5 w-5 text-red-600"}),"duplicate"===e.status&&(0,t.jsx)(o.Icon,{name:"AlertCircle",className:"h-5 w-5 text-yellow-600"}),"uploading"===e.status&&(0,t.jsx)(o.Icon,{name:"Loader2",className:"h-5 w-5 text-blue-600 animate-spin"})]}),!A&&"uploading"!==e.status&&(0,t.jsx)("button",{onClick:()=>{var t;return t=e.id,void F(e=>{let a=e.find(e=>e.id===t);return a&&a.previewUrl.startsWith("blob:")&&URL.revokeObjectURL(a.previewUrl),e.filter(e=>e.id!==t)})},className:"text-gray-400 hover:text-red-600",children:(0,t.jsx)(o.Icon,{name:"Trash2",className:"h-4 w-4"})})]},e.id))})]}),0===R.length&&(0,t.jsx)("p",{className:"text-center text-sm text-muted-foreground py-8",children:e("adminListMembers.bulk.empty","Belum ada file yang dipilih")})]}),(0,t.jsxs)("div",{className:"flex items-center justify-between p-6 border-t",children:[(0,t.jsx)("div",{className:"text-sm text-muted-foreground",children:R.length>0&&(0,t.jsx)("span",{children:e("adminListMembers.bulk.totalFiles","{count} file siap diupload",{count:R.length})})}),(0,t.jsxs)("div",{className:"flex gap-2",children:[(0,t.jsx)(n.Button,{onClick:eo,variant:"outline",disabled:A,children:e("adminListMembers.bulk.cancel","Tutup")}),(0,t.jsx)(n.Button,{onClick:em,disabled:0===R.length||A,children:A?(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)(o.Icon,{name:"Loader2",className:"h-4 w-4 mr-2 animate-spin"}),e("adminListMembers.bulk.uploading","Mengunggah...")]}):(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)(o.Icon,{name:"Upload",className:"h-4 w-4 mr-2"}),e("adminListMembers.bulk.start","Mulai Upload")]})})]})]})]})})]})}e.s(["default",()=>d])}]);